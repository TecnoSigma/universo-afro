<br><br>
<div class="container-fluid">
  <%= render '/partials/messages' %>
  <div class="row">
    <div class="col-sm-6 offset-sm-4 col-md-6 offset-md-4 col-lg-4 offset-lg-4">
      <div class="card">
        <h5 class="card-header">
          <%= t('.title') %>
        </h5>
        <div class="card-body">
          <p class="card-text">
          <%= form_with scope: 'candidate', url: '/store_professional_data' do |form| %>
              <h6 class="fw-bold"><%= t('.address_data') %></h6>
              <hr>
              <div class="mb-3">
                <label class="form-label fst-italic">
                  <%= t('.email') %>
                  <%= session[:user_data]['email'] %>
                </label>
                <br>
                <label class="form-label fst-italic">
                  <%= t('.cpf') %>
                  <%= session[:user_data]['cpf'] %>
                </label>
              </div>
              <div class="mb-3">
                <label class="form-label"><%= t('.postal_code') %></label>
                <%= form.text_field 'postal_code', class: 'form-control', required: true %>
              </div>
              <div class="mb-3">
                <label class="form-label"><%= t('.address') %></label>
                <%= form.text_field 'address', class: 'form-control', required: true %>
              </div>
              <div class="mb-3">
                <label class="form-label"><%= t('.number') %></label>
                <%= form.text_field 'number', class: 'form-control', required: true %>
              </div>
              <div class="mb-3">
                <label class="form-label"><%= t('.complement') %></label>
                <%= form.text_field 'complement', class: 'form-control' %>
              </div>
              <div class="mb-3">
                <label class="form-label"><%= t('.district') %></label>
                <%= form.text_field 'district', class: 'form-control', required: true %>
              </div>
              <div class="mb-3">
                <label class="form-label"><%= t('.city') %></label>
                <%= form.text_field 'city', class: 'form-control', required: true %>
              </div>
              <div class="mb-3">
                <label class="form-label"><%= t('.state') %></label>
                <%= form.text_field 'state', class: 'form-control', required: true %>
              </div>
              <br>
              <%= form.submit t('.register_billing_data_btn'), class: 'btn btn-dark' %>
            <% end %>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  function listCities(state_name, receptorField) {
    let citiesList = [];
    let citiesTotal = 0;

    Rails.ajax({
      type: 'GET',
      url: '/users/cities',
      data: new URLSearchParams({'state_name': state_name}).toString(),
      success: function (response) {
        let citiesList = [];
        let citiesLength = 0;
        let citiesOptions = "";

        citiesList = response.cities;
        citiesLength = citiesList.length

        for(let i = 0; i < citiesLength ; i++) {
          citiesOptions += "<option>" + citiesList[i] + "</option>"
        }

        receptorField.innerHTML = citiesOptions;
      },
      error: function(xhr,status,error){
        console.log(xhr);
      }
    });
  }
</script>~
